
一、部署模式

1、主从模式

	（1）主从复制
	
![[Pasted image 20241208142908.png]]

	主从复制流程：
	- 1.slave发送sync命令到master。
	- 2.master接收到SYNC命令后，执行bgsave命令，生成RDB全量文件。
	- 3.master使用缓冲区，记录RDB快照生成期间的所有写命令。
	- 4.master执行完bgsave后，向所有slave发送RDB快照文件。
	- 5.slave收到RDB快照文件后，载入、解析收到的快照。
	- 6.master使用缓冲区，记录RDB同步期间生成的所有写的命令。
	- 7.master快照发送完毕后，开始向slave发送缓冲区中的写命令;
	- 8.salve接受命令请求，并执行来自master缓冲区的写命令


2、哨兵模式

	（1）概念
		哨兵模式：由一个或多个Sentinel实例组成的Sentinel系统，它可以监视所有的Redis主节点和从节点，并在被监视的主节点进入下线状态时，自动将下线主服务器属下的某个从节点升级为新的主节点**。但是呢，一个哨兵进程对Redis节点进行监控，就可能会出现问题（单点问题），因此，可以使用多个哨兵来进行监控Redis节点，并且各个哨兵之间还会进行监控。

3、集群模式

	（1）实现了数据的分布式存储，对数据进行分片；并且，它也提供复制和故障转移的功能。
	
	（2）采用Hash slot算法实现数据的分布式安置
	
		插槽算法把整个数据库被分为16384个slot（槽），每个进入Redis的键值对，根据key进行散列，分配到这16384插槽中的一个。使用的哈希映射也比较简单，用CRC16算法计算出一个16位的值，再对16384取模。数据库中的每个键都属于这16384个槽的其中一个，集群中的每个节点都可以处理这16384个槽。
	
		集群中的每个节点负责一部分的hash槽，比如当前集群有A、B、C三个节点，每个节点上的哈希槽数 =16384/3，那么就有：
		节点A负责0~5460号哈希槽
		节点B负责5461~10922号哈希槽
		节点C负责10923~16383号哈希槽

	（3）为了保证高可用，Cluster集群模式也引入了主从复制，一个主节点对应一个或者多个从节点。
	